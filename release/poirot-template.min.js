!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.poirotTemplate=e()}}(function(){return function e(t,n,r){function o(d,f){if(!n[d]){if(!t[d]){var a="function"==typeof require&&require;if(!f&&a)return a(d,!0);if(i)return i(d,!0);var l=new Error("Cannot find module '"+d+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[d]={exports:{}};t[d][0].call(u.exports,function(e){var n=t[d][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[d].exports}for(var i="function"==typeof require&&require,d=0;d<r.length;d++)o(r[d]);return o}({"poirot-template":[function(e,t){"use strict";function n(e,t,n,r){var o=this;if(o.references=e,o.template=t,void 0===r&&"object"==typeof n&&(r=n,n=void 0),o.blockExpr=n,r)o.root=r;else{var i=c("div");i.innerHTML=t,o.root=i.firstChild}o.bindings={},o.children=[],o.walk(this.root,e.slice(0))}var r=function(e,t){return n.prototype.render.bind(new n(e,t))},o="#",i="/",d="!",f="F",a="",l="L",u="N";r.TYPE={BLOCK_OPEN:o,BLOCK_CLOSE:i,FUNCTION:d,FRAGMENT:f,ESCAPED:a,LITERAL:l,NUMERAL:u},t.exports=r;var c=function(e){return document.createElement(e)},s=function(e){return document.createTextNode(e)};r.setDocument=function(e){c=e.createElement.bind(e),s=e.createTextNode.bind(e)};var p={};r.getHandler=function(e){return p[e]},r.registerHandler=function(e,t){if(void 0!==p[e])throw"A handler for template code "+e+" already exists";return p[e]=t,this},function(){var e=r.registerHandler;e(d,function(e,t,n){n?e.value=t:p[a](e,t(),!1)}),e(a,function(e,t,n){n?e.value=t:0===e.childNodes.length?e.appendChild(s(t)):e.firstChild.nodeValue=t}),e(l,function(e,t,n){n?e.value=t:e.innerHTML=t}),e(u,function(e,t,n){var r=isNaN(t)?"NaN":t;n?e.value=r:e.innerHTML=r}),e(f,function(e,t,n){var r=isNaN(t)?"NaN":t;n?e.value=r:e.innerHTML=r})}(),r.Template=n,n.prototype.clone=function(){var e=this;return new n(e.references,e.template,e.root.cloneNode(!0))},n.prototype.cloneSub=function(){var e=this;return new n(e.references,e.template,e.root.firstChild.cloneNode(!0))},n.prototype.walk=function(e,t){if(0!==t.length&&"#text"!==e.nodeName){var n=this,r="data-poirot";if(e.hasAttribute(r)&&n.bindNode(e,t.shift()),!e.hasAttribute(r+"-sub")){var o,i=e.childNodes.length;for(o=0;i>o;o++)n.walk(e.childNodes[o],t)}}};var h=function(e,t){var n=e.blockExpr.split(" "),r=n[0],o=n[1];return function(n){var i,d,f,a={},l=n[r];if(void 0!==l){for(var u=l.length,c=t.firstChild,s=c?c.nextSibling:null;s;)t.removeChild(c);for(i in n)a[i]=n[i];for(f=0;u>f;++f)a[o]=l[f],d=e.cloneSub().render(a),t.appendChild(d)}}};n.prototype.bindNode=function(e,t){var r,o,i=this;for(r=t.length-1;r>=0;--r)o=t[r],o instanceof n?i.children.push({template:o,render:h(o,e)}):(o.key in i.bindings||(i.bindings[o.key]=[]),this.bindings[o.key].push(o),o._target=void 0===o.at?e:e.getAttributeNode(o.at),o._render=p[o.tp])},n.prototype.render=function(e){var t,n,r,o,i=this,d=i.children,f=i.bindings;for(t in f){var a=t.split("."),l=a.length,u=e;for(n=0;l>n&&void 0!==u;++n)u=u[a[n]];if(void 0!==u)for(o=f[t],n=o.length-1;n>=0;--n){r=o[n];try{r._render(r._target,u,r.at)}catch(c){console.error("Failed to render value:",u,c),console.trace()}}}for(n=d.length-1;n>=0;--n)d[n].render(e);return i.root}},{}]},{},[])("poirot-template")});
//# sourceMappingURL=poirot-template.min.js.map